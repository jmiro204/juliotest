<mvc:View controllerName="app.inetum.zcarauditinciv2.controller.Object" xmlns:mvc="sap.ui.core.mvc" xmlns="sap.uxap" xmlns:m="sap.m"
	xmlns:core="sap.ui.core" xmlns:forms="sap.ui.layout.form" xmlns:s="sap.ui.comp.smartfield" xmlns:sf="sap.ui.comp.smartform"
	xmlns:smartTable="sap.ui.comp.smarttable" xmlns:table="sap.ui.table" height="100%">
	<ObjectPageLayout id="ObjectPageLayout" upperCaseAnchorBar="false" busy="{objectView>/busy}"
		showFooter="{= ${objectView>/mod} || ${objectView>/cre} }">
		<headerTitle>
			<ObjectPageDynamicHeaderTitle>
				<expandedHeading>
					<m:Title text="{RetailstoreidText} {Retailstoreid}"/>
				</expandedHeading>
				<actions>
					<!--<m:Button text="Editar" type="Emphasized" press="onHandleEditToggled"
						visible="{= ${Update_mc} &amp;&amp; ${objectView>/vis} ? true : false }"/>
					<m:Button text="Borrar" press="onHandleDeleteToggled" visible="{= ${Delete_mc} &amp;&amp; ${objectView>/vis} ? true : false }"/>
					<m:Button id="btnCancel" text="Cencelar" press="onHandleCencelToggled" visible="{= ${objectView>/mod} }" type="Reject"/>-->
				</actions>
			</ObjectPageDynamicHeaderTitle>
		</headerTitle>
		<headerContent></headerContent>
		<sections>
			<ObjectPageSection titleUppercase="false" title="General Information">
				<subSections>
					<ObjectPageSubSection title="Información general" showTitle="true">
						<blocks>
							<sf:SmartForm id="smartFormHeader" editTogglable="false" class="editableForm" checkButton="false" validationMode="Async"
								editable="{= !${objectView>/vis} &amp;&amp; ${StatusInci} !== '02' }">
								<sf:layout>
									<sf:ColumnLayout columnsM="2" columnsL="3" columnsXL="4"/>
								</sf:layout>
								<sf:customData>
									<core:CustomData key="defaultTextInEditModeSource" value="ValueList"/>
								</sf:customData>
								<sf:Group label="Datos transacción">
									<sf:GroupElement label="Fecha abierta de estadillo">
										<s:SmartField id="AuditbusinessdaydateModif" editable="{= !${objectView>/vis} &amp;&amp; ${StatusInci} !== '02' }"
											value="{ 'path':'AuditbusinessdaydateModif', 'type':'sap.ui.model.type.Date', 'formatOptions': { 'pattern': 'dd-MM-yyyy' } }"></s:SmartField>
									</sf:GroupElement>
									<sf:GroupElement>
										<s:SmartField id="Auditbusinessdaydate"
											value="{ 'path':'Auditbusinessdaydate', 'type':'sap.ui.model.type.Date', 'formatOptions': { 'pattern': 'dd-MM-yyyy' } }"
											editable="{objectView>/cre}" textInEditModeSource="ValueList" change="onChangeValueHeader" fieldGroupIds="fgDG">
											<s:configuration controlType="datePicker"></s:configuration>
										</s:SmartField>
									</sf:GroupElement>
									<sf:GroupElement></sf:GroupElement>
									<sf:GroupElement>
										<s:SmartField id="Retailstoreid" value="{Retailstoreid}" entitySet="Incidencias" editable="{objectView>/cre}" change="onChangeValueHeader"
											visible="{objectView>/cre}" fieldGroupIds="fgDG" mandatory="true"/>
									</sf:GroupElement>
									<sf:GroupElement label="Tienda">
										<m:Text id="RetailstoreidInput" text="{RetailstoreidText} ({Retailstoreid})" visible="{= !${objectView>/cre} }"/>
									</sf:GroupElement>
									<sf:GroupElement>
										<s:SmartField id="Workstationid" value="{Workstationid}" editable="{objectView>/cre}" change="onChangeValueHeader" fieldGroupIds="fgDG"
											mandatory="true"/>
									</sf:GroupElement>
									<sf:GroupElement>
										<s:SmartField id="Transnumber" value="{Transnumber}" editable="{objectView>/cre}" change="onChangeValueHeader" fieldGroupIds="fgDG"
											mandatory="true"/>
									</sf:GroupElement>
									<sf:GroupElement label="Tipo trans.">
										<m:Text id="Transtypecodeinput" text="{Transtypecodetext} ({Transtypecode})"/>
									</sf:GroupElement>
								</sf:Group>
								<sf:Group label="Datos transacción original">
									<sf:GroupElement label="{/#IncidenciasType/origbusinessdate/@sap:label}">
										<!--<s:SmartField id="origbusinessdate" value="{origbusinessdate}" editable="false"/>-->
										<m:DatePicker id="origbusinessdate"
											value="{ 'path':'origbusinessdate', 'type':'sap.ui.model.type.Date', 'formatOptions': { 'pattern': 'dd-MM-yyyy' } }"
											change="onChangeValueHeader" editable="false"/>
									</sf:GroupElement>
									<sf:GroupElement label="{/#IncidenciasType/Origstoreid/@sap:label}">
										<!--<s:SmartField id="Origstoreid" value="{Origstoreid}" editable="false"/>-->
										<m:Input id="Origstoreid" value="{Origstoreid}" editable="false"/>
									</sf:GroupElement>
									<sf:GroupElement label="{/#IncidenciasType/origwrkstid/@sap:label}">
										<!--<s:SmartField id="origwrkstid" value="{origwrkstid}" editable="false"/>-->
										<m:Input id="origwrkstid" value="{ path: 'origwrkstid', formatter: '.formatter.convertTpv' }" editable="false"/>
									</sf:GroupElement>
									<sf:GroupElement label="{/#IncidenciasType/origtransnumber/@sap:label}">
										<!--<s:SmartField id="origtransnumber" value="{origtransnumber}" editable="false"/>-->
										<m:Input id="origtransnumber" value="{ path: 'origtransnumber', formatter: '.formatter.convertTpv' }" editable="false"/>
									</sf:GroupElement>
									<sf:GroupElement>
										<s:SmartField id="Orgimptrans" value="{Orgimptrans}" editable="false"/>
									</sf:GroupElement>
								</sf:Group>
								<sf:Group label="Datos incidencia">
									<sf:GroupElement>
										<s:SmartField id="MotivoSM" value="{Motivo}" editable="{objectView>/cre}" change="onChangeValueHeader" fieldGroupIds="fgDG" mandatory="true"/>
									</sf:GroupElement>
									<!--<sf:GroupElement label="Motivo">
										<m:Text id="MotivoInput" text="{Motivotext} ({Motivo})" visible="{= !${objectView>/cre} }"/>
									</sf:GroupElement>-->
									<sf:GroupElement>
										<s:SmartField id="Observacion" value="{Observacion}" editable="{= ${objectView>/cre} || ${objectView>/mod} }" fieldGroupIds="fgDG"
											mandatory="true" change="onChangeValueHeader"/>
									</sf:GroupElement>
									<!--<sf:GroupElement>
										<s:SmartField id="StatusInci" value="{StatusInci}" editable="false"/>
									</sf:GroupElement>-->
								</sf:Group>
								<sf:Group label="Datos modificados">
									<sf:GroupElement label="Importe total anterior">
										<s:SmartField id="Imptrans" value="{Salesamount}" uomEditable="false" editable="false"/>
									</sf:GroupElement>
									<sf:GroupElement label="Importe total modificar">
										<s:SmartField id="ImptransModif" value="{Salesamountmodif}" uomEditable="false"
											editable="{= !${objectView>/vis} &amp;&amp; ${StatusInci} !== '02' }" visible="{= ${Motivo>/Salesamountmodif} === 'SI' ? true : false }"
											mandatory="{= ${Motivo>/Salesamountmodif} === 'SI' ? true : false }" change="onChangeValueHeader"/>
									</sf:GroupElement>
									<sf:GroupElement label="Importe total actual">
										<s:SmartField id="ImptransCalc" value="{Salesamountcalc}" uomEditable="false" editable="false"/>
									</sf:GroupElement>
									<sf:GroupElement>
										<s:SmartField id="TranstypecodemodifSM" value="{Transtypecodemodif}" visible="{= ${Motivo>/Transtypecodemodif} === 'SI' ? true : false }"
											mandatory="{= ${Motivo>/Transtypecodemodif} === 'SI' ? true : false }" fieldGroupIds="fgDG"
											editable="{= !${objectView>/vis} &amp;&amp; ${StatusInci} !== '02' }"/>
									</sf:GroupElement>
									<!--Talon Original Modif-->
									<sf:GroupElement label="Periodo de venta ref. Modif">
										<s:SmartField id="Origbusinessdatemodif" editable="{ !${objectView>/vis} &amp;&amp; ${StatusInci} !== '02'}"
											visible="{= ${Motivo>/Origtransnumbermodif} === 'SI' ? true : false }" fieldGroupIds="fgDG"
											value="{ 'path':'Origbusinessdatemodif', 'type':'sap.ui.model.type.Date', 'formatOptions': { 'pattern': 'dd-MM-yyyy' } }"
											mandatory="{= ${Motivo>/Origtransnumbermodif} === 'SI' ? true : false }"></s:SmartField>
									</sf:GroupElement>
									<sf:GroupElement label="Tienda refer. Modif">
										<s:SmartField id="Origstoreidmodif" value="{Origstoreidmodif}" editable="{ !${objectView>/vis} &amp;&amp; ${StatusInci} !== '02'}"
											fieldGroupIds="fgDG" visible="{= ${Motivo>/Origtransnumbermodif} === 'SI' ? true : false }"
											mandatory="{= ${Motivo>/Origtransnumbermodif} === 'SI' ? true : false }"/>
									</sf:GroupElement>
									<sf:GroupElement label="Núm.TPV referenciado. Modif">
										<s:SmartField id="Origwrkstidmodif" value="{Origwrkstidmodif}" editable="{ !${objectView>/vis} &amp;&amp; ${StatusInci} !== '02'}"
											fieldGroupIds="fgDG" visible="{= ${Motivo>/Origtransnumbermodif} === 'SI' ? true : false }"
											mandatory="{= ${Motivo>/Origtransnumbermodif} === 'SI' ? true : false }"/>
									</sf:GroupElement>
									<sf:GroupElement label="Núm.transacción ref. Modif">
										<s:SmartField id="Origtransnumbermodif" value="{Origtransnumbermodif}" editable="{ !${objectView>/vis} &amp;&amp; ${StatusInci} !== '02'}"
											fieldGroupIds="fgDG" visible="{= ${Motivo>/Origtransnumbermodif} === 'SI' ? true : false }"
											mandatory="{= ${Motivo>/Origtransnumbermodif} === 'SI' ? true : false }"/>
									</sf:GroupElement>
								</sf:Group>
							</sf:SmartForm>
						</blocks>
					</ObjectPageSubSection>
				</subSections>
			</ObjectPageSection>
			<ObjectPageSection titleUppercase="false" title="Contact Information">
				<subSections>
					<ObjectPageSubSection title="Datos MP Modificado">
						<blocks>
							<m:Table id="smartTablePosE" items="{modelPositionMp>/}" visible="true">
								<m:columns>
									<!--	<m:Column >
										<m:Text text="{/#IncimpType/Tendernumber/@sap:label}"/>
									</m:Column>-->
									<m:Column >
										<m:Text text="Tarjeta Anterior"/>
									</m:Column>
									<m:Column >
										<m:Text text="Tarjeta Actual"/>
									</m:Column>
									<m:Column >
										<m:Text text="Importe Anterior"/>
									</m:Column>
									<m:Column >
										<m:Text text="{/#IncimpType/Tenderamountmodif/@sap:label}"/>
									</m:Column>
									<m:Column id="Tenderamountmodif22">
										<m:Text text="Importe Actual"/>
									</m:Column>
									<m:Column >
										<m:Text text="{/#IncimpType/Mediopago/@sap:label}"/>
									</m:Column>
									<m:Column >
										<m:Text text="{/#IncimpType/Desgloce/@sap:label}"/>
									</m:Column>
									<!--<m:Column >
										<m:Text text="{/#IncimpType/Mediopagotexts/@sap:label}"/>
									</m:Column>-->
									<m:Column >
										<m:Text text="{/#IncimpType/Subtipo/@sap:label}"/>
									</m:Column>
								</m:columns>
								<m:items>
									<m:ColumnListItem vAlign="Middle">
										<!--<m:Input id="Tendernumber" value="{modelPositionMp>Tendernumber}" editable="false" change="onChangeValuePosition"/>-->
										<m:Input id="Cardnumber" value="{modelPositionMp>Cardnumber}" editable="false" change="onChangeValuePosition"/>
										<m:Input id="Custcardnumbermodif" value="{modelPositionMp>Custcardnumbermodif}"
											editable="{= ${Motivo>/Custcardnumbermodif} === 'SI' &amp;&amp; !${objectView>/vis} &amp;&amp; ${StatusInci} !== '02' ? true : false }"
											required="{= ${Motivo>/Custcardnumbermodif} === 'SI' ? true : false }" change="onChangeValuePosition"/>
										<m:Input id="Tenderamount"
											value="{path: 'modelPositionMp>Tenderamount', type:'sap.ui.model.type.Float', formatOptions: { maxIntegerDigits: 13, maxFractionDigits: 2, preserveDecimals: true },constraints:{ precision:13, scale:2 }}"
											editable="false" change="onChangeValuePosition"/>
										<m:Input id="Tenderamountmodif"
											value="{path: 'modelPositionMp>Tenderamountmodif', type:'sap.ui.model.type.Float', formatOptions: { maxIntegerDigits: 13, maxFractionDigits: 2, preserveDecimals: true },constraints:{ precision:13, scale:2 }}"
											editable="{= ${modelPositionMp>Mediopago} === '01' &amp;&amp; ${Motivo>/Tenderamountmodif} === 'SI' &amp;&amp; !${objectView>/vis} &amp;&amp; ${StatusInci} !== '02' ? true : false }"
											required="{= ${modelPositionMp>Mediopago} === '01' &amp;&amp; ${Motivo>/Tenderamountmodif} === 'SI' ? true : false }" change="onChangeValuePosition"/>
										<m:Input id="Tenderamountmodif2"
											value="{path: 'modelPositionMp>Tenderamountmodif2', type:'sap.ui.model.type.Float', formatOptions: { maxIntegerDigits: 13, maxFractionDigits: 2, preserveDecimals: true },constraints:{ precision:13, scale:2 }}"
											editable="false" change="onChangeValuePosition"/>
										<m:Text id="Mediopago" text="{modelPositionMp>Mediopago}"/>
										<m:Text id="Mediopago1" text="{modelPositionMp>Desgloce}"/>
										<!--<m:Text text="{modelPositionMp>Mediopagotexts}"/>-->
										<m:Text text="{modelPositionMp>Subtipo}"/>
									</m:ColumnListItem>
								</m:items>
							</m:Table>
						</blocks>
					</ObjectPageSubSection>
				</subSections>
			</ObjectPageSection>
			<ObjectPageSection titleUppercase="false" title="Contact Information">
				<subSections>
					<ObjectPageSubSection title="Datos Pos.Venta Modificado">
						<blocks>
							<m:Table id="smartTablePosLVE" items="{modelPositionMLv>/}" visible="true">
								<m:columns>
									<m:Column >
										<m:Text text="{/#InciposType/Zzcoddpto/@sap:label}"/>
									</m:Column>
									<m:Column >
										<m:Text text="{/#InciposType/Zzarthost/@sap:label}"/>
									</m:Column>
									<m:Column >
										<m:Text text="{/#InciposType/Retailquantity/@sap:label}"/>
									</m:Column>
									<m:Column >
										<m:Text text="{/#InciposType/Salesamount/@sap:label}"/>
									</m:Column>
									<!--<m:Column >
										<m:Text text="Valor de venta modif"/>
									</m:Column>
									<m:Column >
										<m:Text text="{/#InciposType/Salesamount/@sap:label}"/>
									</m:Column>-->
								</m:columns>
								<m:items>
									<m:ColumnListItem vAlign="Middle">
										<m:Input id="Zzcoddpto" value="{modelPositionMLv>Zzcoddpto}" editable="false"/>
										<m:Input id="Zzarthost" value="{modelPositionMLv>Zzarthost}" editable="false"/>
										<m:Input id="Retailquantity" value="{modelPositionMLv>Retailquantity} {modelPositionMLv>Salesuom}" editable="false"/>
										<m:Input id="Salesamount" value="{modelPositionMLv>Salesamount}" editable="false"/>
										<!--	<m:Input id="Salesamountmodif"
											value="{path: 'modelPositionMLv>Salesamountmodif', type:'sap.ui.model.type.Float', formatOptions: { maxIntegerDigits: 13, maxFractionDigits: 2, preserveDecimals: true },constraints:{ precision:13, scale:2 }}"
											editable="false" change="onChangeValuePosition"/>-->
										<!--<m:Input id="Salesamountmodif"  value="{modelPositionMLv>Salesamountmodif}" editable="false" change="onChangeValuePosition"/>-->
										<!--	<m:Input id="Salesamountmodif2" value="{modelPositionMLv>Salesamountmodif2}" editable="false"/>-->
									</m:ColumnListItem>
								</m:items>
							</m:Table>
						</blocks>
					</ObjectPageSubSection>
				</subSections>
			</ObjectPageSection>
		</sections>
		<footer>
			<m:OverflowToolbar>
				<m:ToolbarSpacer/>
				<m:Button id="btnSave" type="Accept" text="Guardar" press="onSave" enabled="true"/>
			</m:OverflowToolbar>
		</footer>
	</ObjectPageLayout>
</mvc:View>