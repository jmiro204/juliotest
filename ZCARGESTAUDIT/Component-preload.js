/**
* This file was auto-generated by SAP Web IDE build and includes all
* the source files required by SAPUI5 runtime for performance optimization.
* PLEASE DO NOT EDIT THIS FILE!! Changes will be overwritten the next time the build is run.
*/
jQuery.sap.registerPreloadedModules({
	"version": "2.0",
	"name": "zcargestauditv2/Component-preload",
	"modules": {
		"zcargestauditv2/ext/controller/ListReportExt.controller.js": "sap.ui.controller(\"zcargestauditv2.ext.controller.ListReportExt\", {\r\n\r\n\trDateHoy: {\r\n\t\tinit: null,\r\n\t\tend: null\r\n\t},\r\n\trDatePend: {\r\n\t\ttypeErr: null\r\n\t},\r\n\r\n\tonInit: function(oEvent) {\r\n\r\n\t\tthis.getView().setBusy(true);\r\n\t\tthis._customModel = new sap.ui.model.odata.ODataModel(\"/sap/opu/odata/sap/ZCAR_CDS_SB_AUDIT_HEAD/\", true);\r\n\t\tthis._customModel.setSizeLimit(9999);\r\n\t\tthis.gResourceBundle = this.getOwnerComponent().getModel(\"i18n\").getResourceBundle();\r\n\t\tthis.gDataReceived = false;\r\n\t\t//ASEASE\r\n\t\t/*var sFiltrosGuardados = this._getFiltersStorage();//sessionStorage.getItem(\"misFiltrosGTrx\");\r\n\r\n\t\tif (sFiltrosGuardados) {\r\n\r\n\t\t\t//var oFilterData = JSON.parse(sFiltrosGuardados);\r\n\t\t\tvar oSmartFilterBar = this.byId(\"listReportFilter\");\r\n\r\n\t\t\t// Aplicar los filtros recuperados al SmartFilterBar\r\n\t\t\toSmartFilterBar.setFilterData(sFiltrosGuardados);\r\n\r\n\t\t\t// Ejecutar el filtrado automáticamente\r\n\t\t\tthis._triggerSearch();\r\n\r\n\t\t}*/\r\n\r\n\t},\r\n\tonBeforeRendering: function(oControl) {\r\n\t\tdebugger;\r\n\t},\r\n\tonListNavigationExtension: function(oEvent, oBindingContext, bReplace) {\r\n\t\t/*zconsultrx-manage&/Head(Retailstoreid='10001',Businessdaydate=datetime'2024-06-12T00%253A00%253A00',Transindex=1,Transnumber='800',Workstationid='100',IsActiveEntity=true)*/\r\n\t\tvar\r\n\t\t\toPropSelected = oEvent.getParameter(\"listItem\").getBindingContext().getProperty(),\r\n\t\t\tvRetailstoreid = oPropSelected.Retailstoreid,\r\n\t\t\tvDate = oPropSelected.Businessdaydate.toISOString().replaceAll(\"T00:00:00.000Z\", \"T00%3A00%3A00\"),\r\n\t\t\t//vDate = oPropSelected.Businessdaydate.toISOString().replaceAll(\"T00:00:00.000Z\", \"T00%253A00%253A00\")\r\n\t\t\t// OLD\r\n\t\t\tvRoute = \"Head(Retailstoreid='\" + vRetailstoreid.padStart(10, \"0\") +\r\n\t\t\t\"',Businessdaydate=datetime'\" + vDate +\r\n\t\t\t\"',Transindex=\" + oPropSelected.Transindex + \",Transnumber='\" + oPropSelected.TransnumberView.replace(/^0+/, '') +\r\n\t\t\t\"',Workstationid='\" + oPropSelected.WorkstationidView.replace(/^0+/, '') + \"',IsActiveEntity=true)\",\r\n\t\t\t//oModel = this.getView().getModel(),\r\n\t\t\t//oModel = new sap.ui.model.odata.ODataModel(\"/sap/opu/odata/sap/ZCAR_SB_CDS_TRANS_HEAD/\", true);\r\n\t\t\toModel = new sap.ui.model.odata.ODataModel(\"/sap/opu/odata/sap/ZCAR_SB_CDS_TRANS_HEAD_V2/\", true);\r\n\r\n\t\tvar oFilters = [\r\n\t\t\tnew sap.ui.model.Filter(\"Retailstoreid\", sap.ui.model.FilterOperator.EQ, vRetailstoreid.padStart(10, \"0\")),\r\n\t\t\tnew sap.ui.model.Filter(\"Businessdaydate\", sap.ui.model.FilterOperator.EQ, oPropSelected.Businessdaydate),\r\n\t\t\tnew sap.ui.model.Filter(\"Transindex\", sap.ui.model.FilterOperator.EQ, oPropSelected.Transindex)\r\n\t\t];\r\n\r\n\t\t//ASE INI\r\n\t\tvar oFilterData = this.byId(\"listReportFilter\").getFilterData();\r\n\t\tsessionStorage.setItem(\"misFiltrosGTrx\", JSON.stringify(oFilterData));\r\n\t\tsessionStorage.setItem(\"misFiltrosGTrxTime\", new Date());\r\n\t\t//ASE END\r\n\r\n\t\tthis._onNavigateWithoutDraft(\r\n\t\t\toPropSelected.Retailstoreid,\r\n\t\t\tvDate,\r\n\t\t\toPropSelected.Transindex,\r\n\t\t\toPropSelected.Transnumber.replace(/^0+/, ''),\r\n\t\t\toPropSelected.Workstationid.replace(/^0+/, ''));\r\n\t\t/*oModel.read(\"/Head\", {\r\n\t\t\tfilters: oFilters,\r\n\t\t\turlParameters: {\r\n\t\t\t\t\"$expand\": \"DraftAdministrativeData\"\r\n\t\t\t},\r\n\t\t\tsuccess: function(data, resp) {\r\n\t\t\t\tdebugger;\r\n\t\t\t\tvar isActive = true,\r\n\t\t\t\t\tvUserDraft = \"\",\r\n\t\t\t\t\tvUserLogin = sap.ushell.Container.getService(\"UserInfo\").getUser().getId(),\r\n\t\t\t\t\tvFullNameLogin = sap.ushell.Container.getService(\"UserInfo\").getUser().getFullName();\r\n\t\t\t\tdata.results.forEach(function(item) {\r\n\t\t\t\t\tif (item.DraftAdministrativeData) {\r\n\t\t\t\t\t\tisActive = false;\r\n\t\t\t\t\t\tvUserDraft = item.DraftAdministrativeData.CreatedByUser;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tif (vUserDraft === vUserLogin || vUserDraft === \"\") {\r\n\t\t\t\t\tthis._onNavigate(\r\n\t\t\t\t\t\tdata.results[0].Retailstoreid,\r\n\t\t\t\t\t\tvDate,\r\n\t\t\t\t\t\tdata.results[0].Transindex,\r\n\t\t\t\t\t\tdata.results[0].Transnumber,\r\n\t\t\t\t\t\tdata.results[0].Workstationid,\r\n\t\t\t\t\t\tisActive);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsap.m.MessageBox.alert(\"La transacción esta siendo editada por usuario: \" + vUserDraft + \", ¿Desea visualizar?\", {\r\n\t\t\t\t\t\tactions: [sap.m.MessageBox.Action.OK, sap.m.MessageBox.Action.CANCEL],\r\n\t\t\t\t\t\tonClose: function(sAction) {\r\n\t\t\t\t\t\t\tif (sAction === \"OK\") {\r\n\t\t\t\t\t\t\t\tthis._onNavigate(\r\n\t\t\t\t\t\t\t\t\tdata.results[0].Retailstoreid,\r\n\t\t\t\t\t\t\t\t\tvDate,\r\n\t\t\t\t\t\t\t\t\tdata.results[0].Transindex,\r\n\t\t\t\t\t\t\t\t\tdata.results[0].Transnumber,\r\n\t\t\t\t\t\t\t\t\tdata.results[0].Workstationid,\r\n\t\t\t\t\t\t\t\t\t!isActive);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}.bind(this),\r\n\t\t\t\t\t\tdependentOn: this.getView()\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}.bind(this)\r\n\r\n\t\t});*/\r\n\t\t/*if (sap.ushell.Container) {\r\n\t\t\tsap.ushell.Container\r\n\t\t\t\t.getService(\"CrossApplicationNavigation\")\r\n\t\t\t\t.toExternal({\r\n\t\t\t\t\ttarget: {\r\n\t\t\t\t\t\tsemanticObject: \"zconsultrx\",\r\n\t\t\t\t\t\taction: \"manage\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\tappSpecificRoute: vRoute\r\n\t\t\t\t});\r\n\t\t}*/\r\n\t\treturn true;\r\n\t},\r\n\t_onNavigateWithoutDraft: function(pStoreid, pDate, pIndex, pTransNumber, pWorkstation) {\r\n\t\tvar vRoute = \"Head/Head(Retailstoreid='\" + pStoreid +\r\n\t\t\t\"',Businessdaydate=datetime'\" + pDate +\r\n\t\t\t\"',Transindex=\" + pIndex + \",Transnumber='\" + pTransNumber +\r\n\t\t\t\"',Workstationid='\" + pWorkstation + \"')\";\r\n\t\t// var vRoute = \"Head/Head(Retailstoreid='\" + pStoreid +\r\n\t\t// \"',Businessdaydate=datetime'\" + pDate +\r\n\t\t// \"',Transindex=\" + pIndex   + \")\";\r\n\t\tif (sap.ushell.Container) {\r\n\t\t\tsap.ushell.Container\r\n\t\t\t\t.getService(\"CrossApplicationNavigation\")\r\n\t\t\t\t.toExternal({\r\n\t\t\t\t\ttarget: {\r\n\t\t\t\t\t\tsemanticObject: \"zconsultrx\",\r\n\t\t\t\t\t\taction: \"manage\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\tappSpecificRoute: vRoute\r\n\t\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\t_onNavigate: function(pStoreid, pDate, pIndex, pTransNumber, pWorkstation, pActive) {\r\n\t\tvar vRoute = \"Head(Retailstoreid='\" + pStoreid.padStart(10, \"0\") +\r\n\t\t\t\"',Businessdaydate=datetime'\" + pDate +\r\n\t\t\t\"',Transindex=\" + pIndex + \",Transnumber='\" + pTransNumber +\r\n\t\t\t\"',Workstationid='\" + pWorkstation + \"',IsActiveEntity=\" + pActive + \")\";\r\n\r\n\t\tif (sap.ushell.Container) {\r\n\t\t\tsap.ushell.Container\r\n\t\t\t\t.getService(\"CrossApplicationNavigation\")\r\n\t\t\t\t.toExternal({\r\n\t\t\t\t\ttarget: {\r\n\t\t\t\t\t\tsemanticObject: \"zconsultrx\",\r\n\t\t\t\t\t\taction: \"manage\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\tappSpecificRoute: vRoute\r\n\t\t\t\t});\r\n\t\t}\r\n\t},\r\n\tonBeforeRendering: function(oEvent) {},\r\n\r\n\tonAfterRendering: function(oEvent) {\r\n\t\tvar\r\n\t\t\tsTable = this.getView().byId(\"responsiveTable\"),\r\n\t\t\toListReport = this.getView().byId(\"responsiveTable\").getParent();\r\n\t\tsTable.setMode(\"MultiSelect\");\r\n\t\t//sTable.getParent().setEnableAutoBinding(true);\r\n\t\t/*this.byId(\"listReportFilter-btnGo\").firePress();*/\r\n\t\tthis.getView().byId(\"responsiveTable\").attachSelectionChange(function(oEvnet) {\r\n\r\n\t\t});\r\n\t\tthis._getUrlParameters();\r\n\t\tsTable.getParent().attachBeforeRebindTable(function(oEvent) {\r\n\t\t\tvar oTable = this.getView().byId(\"responsiveTable\"),\r\n\t\t\t\toListReport = oTable.getParent(),\r\n\t\t\t\toTabHeader = oListReport.getItems()[0],\r\n\t\t\t\tvKeySelectedStatus = oTabHeader.getSelectedKey(),\r\n\t\t\t\tmBindingParams = oEvent.getParameter(\"bindingParams\"),\r\n\t\t\t\toModel = this.getView().getModel(),\r\n\t\t\t\tvBusDate = null,\r\n\t\t\t\tofilter = [],\r\n\t\t\t\tvChangeTaskFilter = false,\r\n\t\t\t\toFilterRetailStore;\r\n\r\n\t\t\tif (!this.gDataReceived) {\r\n\t\t\t\tmBindingParams.events = {\r\n\t\t\t\t\t\"dataReceived\": function(oEvent) {\r\n\t\t\t\t\t\tvar aReceivedData = oEvent.getParameter('data');\r\n\t\t\t\t\t\tthis._setValueIndicatorValue();\r\n\t\t\t\t\t}.bind(this)\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tif (mBindingParams.filters.length > 0 && !mBindingParams.filters[0]._bMultiFilter) { //Si no es multifilters\r\n\t\t\t\tmBindingParams.filters[0] = new sap.ui.model.Filter({\r\n\t\t\t\t\tfilters: [\r\n\t\t\t\t\t\tmBindingParams.filters[0],\r\n\t\t\t\t\t\tnew sap.ui.model.Filter(\r\n\t\t\t\t\t\t\t\"Status\",\r\n\t\t\t\t\t\t\tsap.ui.model.FilterOperator.EQ,\r\n\t\t\t\t\t\t\tvKeySelectedStatus === 'A' ? 'I' : vKeySelectedStatus\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t]\r\n\t\t\t\t});\r\n\t\t\t\tmBindingParams.filters[0].bAnd = true;\r\n\t\t\t} else {\r\n\t\t\t\tmBindingParams.filters[0].aFilters.push(new sap.ui.model.Filter(\r\n\t\t\t\t\t\"Status\",\r\n\t\t\t\t\tsap.ui.model.FilterOperator.EQ,\r\n\t\t\t\t\tvKeySelectedStatus === 'A' ? 'I' : vKeySelectedStatus\r\n\t\t\t\t));\r\n\t\t\t}\r\n\r\n\t\t\tvar oFunctionChangeFilter = function(item) {\r\n\t\t\t\tvar oItem = Object.assign({}, item);\r\n\t\t\t\tif (item.sPath && item.sPath === \"Auditbusinessdaydate\") {\r\n\t\t\t\t\t/*item.oValue1 = item.oValue1 ? new Date(item.oValue1.getTime() - item.oValue1.getTimezoneOffset() * 60000) : item.oValue1;\r\n\t\t\t\t\titem.oValue2 = item.oValue2 ? new Date(item.oValue2.getTime() - item.oValue2.getTimezoneOffset() * 60000) : item.oValue2;*/\r\n\t\t\t\t\tofilter.push(item);\r\n\t\t\t\t}\r\n\t\t\t\t/*if (item.sPath && item.sPath === \"Taskerror\" && item.oValue1 !== \"\" && item.oValue1 !== null) { \r\n\t\t\t\t\tvChangeTaskFilter = true;\r\n\t\t\t\t\titem.sOperator = item.sOperator === \"EQ\" ? sap.ui.model.FilterOperator.Contains : item.sOperator === \"NE\" ? sap.ui.model.FilterOperator\r\n\t\t\t\t\t\t.NotContains : item.sOperator;\r\n\t\t\t\t}*/\r\n\t\t\t\tif (item.sPath === \"Retailstoreid\") {\r\n\t\t\t\t\tvar oItemChange = Object.assign({}, item);\r\n\t\t\t\t\toItemChange.oValue1 = oItemChange.oValue1.padStart(10, \"0\");\r\n\t\t\t\t\toItemChange.oValue2 = oItemChange.oValue2 ? oItemChange.oValue2.padStart(10, \"0\") : oItemChange.oValue2;\r\n\t\t\t\t\toItemChange.sPath = \"Retailstoreid\";\r\n\t\t\t\t\tofilter.push(oItemChange);\r\n\r\n\t\t\t\t}\r\n\t\t\t\tif (item.sPath === \"WorkstationidView\") {\r\n\t\t\t\t\toItemChange = Object.assign({}, item);\r\n\t\t\t\t\toItemChange.sPath = \"Workstationid\";\r\n\t\t\t\t\toItemChange.oValue1 = oItemChange.oValue1.padStart(10, \"0\");\r\n\t\t\t\t\toItemChange.oValue2 = oItemChange.oValue2 ? oItemChange.oValue2.padStart(10, \"0\") : oItemChange.oValue2;\r\n\t\t\t\t\tofilter.push(oItemChange);\r\n\t\t\t\t}\r\n\t\t\t\tif ((!ofilter || !vChangeTaskFilter) && item.aFilters) {\r\n\t\t\t\t\toFunctionChangeFilter(item.aFilters);\r\n\t\t\t\t}\r\n\t\t\t\tif (item.length && item.length > 0) {\r\n\t\t\t\t\titem.forEach(function(item2) {\r\n\t\t\t\t\t\toFunctionChangeFilter(item2);\r\n\t\t\t\t\t}.bind(this));\r\n\t\t\t\t}\r\n\t\t\t}.bind(this);\r\n\t\t\tmBindingParams.filters.forEach(function(item) {\r\n\t\t\t\toFunctionChangeFilter(item);\r\n\t\t\t}.bind(this));\r\n\t\t\tthis.gFilters = ofilter;\r\n\t\t}.bind(this), this);\r\n\t\toListReport.removeItem();\r\n\t\toListReport.insertItem(new sap.m.IconTabHeader({\r\n\t\t\tid: \"iconStatusHeader\",\r\n\t\t\tselectedKey: \"E\",\r\n\t\t\titems: [\r\n\t\t\t\tnew sap.m.IconTabFilter({\r\n\t\t\t\t\tkey: \"E\",\r\n\t\t\t\t\ttext: this.gResourceBundle.getText(\"txtErrores\") + \" {modelKPI>/countError}\",\r\n\t\t\t\t\ticonColor: \"Negative\"\r\n\r\n\t\t\t\t}),\r\n\t\t\t\tnew sap.m.IconTabFilter({\r\n\t\t\t\t\tkey: \"B\",\r\n\t\t\t\t\ttext: this.gResourceBundle.getText(\"txtErrorBaja\") + \" {modelKPI>/countBaja}\",\r\n\t\t\t\t\ticonColor: \"Negative\"\r\n\r\n\t\t\t\t}),\r\n\t\t\t\tnew sap.m.IconTabFilter({\r\n\t\t\t\t\tkey: \"C\",\r\n\t\t\t\t\ttext: this.gResourceBundle.getText(\"txtCorr\") + \" {modelKPI>/countCorr}\",\r\n\t\t\t\t\ticonColor: \"Positive\"\r\n\t\t\t\t}),\r\n\t\t\t\tnew sap.m.IconTabFilter({\r\n\t\t\t\t\tkey: \"I\",\r\n\t\t\t\t\ttext: this.gResourceBundle.getText(\"txtWarni\") + \" {modelKPI>/countAlert}\",\r\n\t\t\t\t\ticonColor: \"Critical\"\r\n\t\t\t\t})\r\n\t\t\t],\r\n\t\t\tselect: function(oEvent) {\r\n\t\t\t\tvar sButtonGo = this.getView().byId(\"listReportFilter-btnGo\");\r\n\t\t\t\tthis.gSelectedTab = true;\r\n\t\t\t\tsButtonGo.firePress();\r\n\t\t\t}.bind(this)\r\n\t\t}), 0);\r\n\t\tthis.getView().setModel(new sap.ui.model.json.JSONModel({\r\n\t\t\tcountError: 0,\r\n\t\t\tcountCorr: 0,\r\n\t\t\tcountAlert: 0\r\n\t\t}), \"modelKPI\");\r\n\t\tthis.getView().byId(\"ActionHead1button\").setIcon(\"sap-icon://customer-order-entry\");\r\n\r\n\t},\r\n\t_setValueIndicatorValue: function() {\r\n\t\tvar oTable = this.getView().byId(\"responsiveTable\"),\r\n\t\t\toListReport = oTable.getParent();\r\n\t\tvar tmpModel = new sap.ui.model.odata.v2.ODataModel(\"/sap/opu/odata/sap/ZCAR_CDS_SB_AUDIT_HEAD/\", true);\r\n\t\ttmpModel.setSizeLimit(9999);\r\n\t\ttmpModel.setDefaultBindingMode(sap.ui.model.BindingMode.TwoWay);\r\n\t\ttmpModel.setUseBatch(true);\r\n\t\tthis.getView().setModel(tmpModel, \"tmpModel\");\r\n\t\ttmpModel.setDeferredGroups([\"foo\"]);\r\n\t\tvar oModelKPI = this.getView().getModel(\"modelKPI\");\r\n\t\tif (!this.gSelectedTab) {\r\n\t\t\toModelKPI.setProperty(\"/countError\", 0);\r\n\t\t\toModelKPI.setProperty(\"/countBaja\", 0);\r\n\t\t\toModelKPI.setProperty(\"/countCorr\", 0);\r\n\t\t\toModelKPI.setProperty(\"/countAlert\", 0);\r\n\t\t}\r\n\r\n\t\tvar mParameters = {\r\n\t\t\tgroupId: \"foo\",\r\n\t\t\tfilters: [this.gFilters],\r\n\t\t\turlParameters: {\r\n\t\t\t\t\"$top\": 9999\r\n\t\t\t},\r\n\t\t\tsuccess: function(data) {\r\n\t\t\t\tvar lv_count = 0;\r\n\t\t\t\tif (data.results && data.results.length > 0 && data.results[0].CountError) {\r\n\t\t\t\t\tdata.results.forEach(function(data) {\r\n\t\t\t\t\t\tlv_count = lv_count + data.CountError;\r\n\t\t\t\t\t});\r\n\t\t\t\t\toModelKPI.setProperty(\"/countError\", lv_count);\r\n\t\t\t\t}\r\n\t\t\t\tif (data.results && data.results.length > 0 && data.results[0].CountInfo) {\r\n\t\t\t\t\tdata.results.forEach(function(data) {\r\n\t\t\t\t\t\tlv_count = lv_count + data.CountInfo;\r\n\t\t\t\t\t});\r\n\t\t\t\t\toModelKPI.setProperty(\"/countAlert\", lv_count);\r\n\t\t\t\t}\r\n\t\t\t\tif (data.results && data.results.length > 0 && data.results[0].CountCorr) {\r\n\t\t\t\t\tdata.results.forEach(function(data) {\r\n\t\t\t\t\t\tlv_count = lv_count + data.CountCorr\r\n\t\t\t\t\t});\r\n\t\t\t\t\toModelKPI.setProperty(\"/countCorr\", lv_count);\r\n\t\t\t\t}\r\n\t\t\t\tif (data.results && data.results.length > 0 && data.results[0].CountBaja) {\r\n\t\t\t\t\tdata.results.forEach(function(data) {\r\n\t\t\t\t\t\tlv_count = lv_count + data.CountBaja\r\n\t\t\t\t\t});\r\n\t\t\t\t\toModelKPI.setProperty(\"/countBaja\", lv_count);\r\n\t\t\t\t}\r\n\r\n\t\t\t}.bind(this)\r\n\t\t};\r\n\r\n\t\tif (!this.gSelectedTab) {\r\n\t\t\ttmpModel.read(\"/Counterror\", mParameters);\r\n\t\t\ttmpModel.read(\"/Countinfo\", mParameters);\r\n\t\t\ttmpModel.read(\"/Countcorr\", mParameters);\r\n\t\t\ttmpModel.read(\"/Countbaja\", mParameters);\r\n\t\t\ttmpModel.submitChanges(mParameters);\r\n\t\t}\r\n\t\tthis.gSelectedTab = false;\r\n\t},\r\n\r\n\tonClickActionHead1: function(oEvent) {\r\n\t\tthis.getView().byId(\"responsiveTable\").removeSelections();\r\n\t},\r\n\tonNavegateActionHead2: function(oEvent) { // Valores de los filtros que quieres pasar\r\n\t\tvar oSmartFilter = this.getView().byId(\"listReportFilter\").getFilterData(),\r\n\t\t\toModel = this.getView().getModel(),\r\n\t\t\tsTable = this.getView().byId(\"responsiveTable\"),\r\n\t\t\toSelectContext = sTable.getSelectedContexts();\r\n\t\tif (oSelectContext.length === 1) {\r\n\t\t\tlet vPath = oSelectContext[0].getPath();\r\n\t\t\toModel.read(vPath, {\r\n\t\t\t\tsuccess: function(data) {\r\n\t\t\t\t\t// Navegación utilizando CrossAppNavigation\r\n\t\t\t\t\tvar oCrossAppNavigator = sap.ushell.Container.getService(\"CrossApplicationNavigation\");\r\n\t\t\t\t\tif (sap.ushell.Container) {\r\n\t\t\t\t\t\tsap.ui.getCore().setModel(new sap.ui.model.json.JSONModel({\r\n\t\t\t\t\t\t\tRetailstoreid: data.Retailstoreid,\r\n\t\t\t\t\t\t\tBusinessdaydate: data.beginFecha,\r\n\t\t\t\t\t\t\tWorkstationidView: data.Workstationid.replace(/^(0+)/g, '').padStart(4, \"0\"),\r\n\t\t\t\t\t\t\tTransnumberView: data.Transnumber.replace(/^(0+)/g, '').padStart(4, \"0\")\r\n\t\t\t\t\t\t}), \"modelNavVtt\")\r\n\t\t\t\t\t\tsap.ushell.Container\r\n\t\t\t\t\t\t\t.getService(\"CrossApplicationNavigation\")\r\n\t\t\t\t\t\t\t.toExternal({\r\n\t\t\t\t\t\t\t\ttarget: {\r\n\t\t\t\t\t\t\t\t\tsemanticObject: \"zaltacorvtt\",\r\n\t\t\t\t\t\t\t\t\taction: \"manage\"\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\t\t\tpreferredMode: \"create\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}.bind(this)\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tsap.m.MessageBox.alert(this.gResourceBundle.getText(\"txtSeleOne\"))\r\n\t\t}\r\n\r\n\t\t// oCrossAppNavigator.toExternal({\r\n\t\t// \ttarget: {\r\n\t\t// \t\tshellHash: sTargetApp\r\n\t\t// \t}\r\n\t\t// });\r\n\t},\r\n\tonNavegateActionHead3: function(oEvent) {\r\n\t\t// Navegación utilizando CrossAppNavigation\r\n\t\tvar oFilterData = this.byId(\"listReportFilter\").getFilterData();\r\n\t\tvar oCrossAppNavigator = sap.ushell.Container.getService(\"CrossApplicationNavigation\"),\r\n\t\t\toParam = {\r\n\t\t\t\tAuditbusinessdaydate: new Date(Date.UTC(oFilterData.Auditbusinessdaydate.getFullYear(), oFilterData.Auditbusinessdaydate.getMonth(),\r\n\t\t\t\t\toFilterData.Auditbusinessdaydate\r\n\t\t\t\t\t.getDate())),\r\n\t\t\t\tpreferredMode: \"create\"\r\n\t\t\t};\r\n\t\tif (sap.ushell.Container) {\r\n\r\n\t\t\tsessionStorage.setItem(\"misFiltrosGTrx\", JSON.stringify(oFilterData));\r\n\t\t\tsessionStorage.setItem(\"misFiltrosGTrxTime\", new Date());\r\n\t\t\tfor (var prop in oFilterData) {\r\n\t\t\t\tif (prop === \"Retailstoreid\") {\r\n\t\t\t\t\tvar oItems = oFilterData[prop].items,\r\n\t\t\t\t\t\toFilter = Object.groupBy(oItems, ({\r\n\t\t\t\t\t\t\tkey\r\n\t\t\t\t\t\t}) => key),\r\n\t\t\t\t\t\tvCount = 0,\r\n\t\t\t\t\t\tvStoreid = \"\";\r\n\t\t\t\t\tfor (var store in oFilter) {\r\n\t\t\t\t\t\tvStoreid = vStoreid === \"\" ? store.toString() : vStoreid;\r\n\t\t\t\t\t\tvCount = vCount + 1\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (vCount === 1) {\r\n\t\t\t\t\t\toParam.Retailstoreid = vStoreid;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tsap.ushell.Container\r\n\t\t\t\t.getService(\"CrossApplicationNavigation\")\r\n\t\t\t\t.toExternal({\r\n\t\t\t\t\ttarget: {\r\n\t\t\t\t\t\tsemanticObject: \"zobservaudit\",\r\n\t\t\t\t\t\taction: \"manage\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\tparams: oParam\r\n\t\t\t\t});\r\n\t\t}\r\n\t},\r\n\t//ASEASE\r\n\t_triggerSearch: function() {\r\n\t\t// Obtener la instancia del SmartFilterBar\r\n\t\tvar oSmartFilterBar = this.byId(\"listReportFilter\");\r\n\r\n\t\t// Ejecuta la búsqueda automáticamente\r\n\t\toSmartFilterBar.search();\r\n\t},\r\n\t_getUrlParameters: function(pFilters) {\r\n\t\t/*this.getView().setBusy(true);*/\r\n\t\tvar oCurrentApp = sap.ushell.services.AppConfiguration.getCurrentApplication(),\r\n\t\t\tvHash = oCurrentApp.sFixedShellHash,\r\n\t\t\toHistory = sap.ui.core.routing.History.getInstance(),\r\n\t\t\toListHist = oHistory.aHistory,\r\n\t\t\tvClearFilterStorage = oListHist.length > 2 ? true : false,\r\n\t\t\tsFiltrosGuardados = this._getFiltersStorage(vClearFilterStorage);\r\n\t\tsetTimeout(function() {\r\n\t\t\tvar //vUrl = window.location.href,\r\n\t\t\t\tvDate = new Date(),\r\n\t\t\t\tvDiaToSeg = 1000 * 60 * 60 * 24 * 1,\r\n\t\t\t\tvTime = vDate.getTime(),\r\n\t\t\t\tres = vTime - vDiaToSeg,\r\n\t\t\t\tvDateAyer = new Date(res).toString(),\r\n\t\t\t\tvFind = false,\r\n\t\t\t\t//aUrl = vUrl.split(\"?\"),\r\n\t\t\t\toFiltersBar = this.getView().byId(\"listReportFilter\"),\r\n\t\t\t\tvFilterContain = oFiltersBar.getFilterData() && oFiltersBar.getFilterData().Auditbusinessdaydate ? true : false,\r\n\t\t\t\t/*oDefaultFilter = {\r\n\t\t\t\t\t\"Businessdaydate\": {\r\n\t\t\t\t\t\t\"high\": vDate,\r\n\t\t\t\t\t\t\"low\": vDate\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\toDefaultFilterAyer = {\r\n\t\t\t\t\t\"Businessdaydate\": {\r\n\t\t\t\t\t\t\"high\": vDateAyer,\r\n\t\t\t\t\t\t\"low\": vDateAyer\r\n\t\t\t\t\t}\r\n\t\t\t\t}*/\r\n\t\t\t\toDefaultFilter = {\r\n\t\t\t\t\t\"Auditbusinessdaydate\": vDate\r\n\t\t\t\t},\r\n\t\t\t\toDefaultFilterAyer = {\r\n\t\t\t\t\t\"Auditbusinessdaydate\": vDateAyer\r\n\t\t\t\t};\r\n\t\t\tthis.getView().setBusy(false);\r\n\t\t\t/*aUrl.forEach(function(item) {\r\n\t\t\t\tif (item.includes(\"zgestionhoy\")) {\r\n\t\t\t\t\tvFind = true;\r\n\t\t\t\t}\r\n\t\t\t});*/\r\n\t\t\tvFind = vHash.includes(\"zgestionhoy\") ? true : false;\r\n\r\n\t\t\tif (sFiltrosGuardados && !vFilterContain && !vClearFilterStorage) {\r\n\t\t\t\toFiltersBar.setFilterData(sFiltrosGuardados);\r\n\t\t\t} else if (!vFilterContain) {\r\n\t\t\t\tif (vFind) {\r\n\t\t\t\t\toFiltersBar.setFilterData(oDefaultFilter);\r\n\t\t\t\t} else {\r\n\t\t\t\t\toFiltersBar.setFilterData(oDefaultFilterAyer);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (vFind) {\r\n\t\t\t\tvar oFilterItems = oFiltersBar.getAllFilterItems();\r\n\t\t\t\toFilterItems.forEach(function(item) {\r\n\t\t\t\t\tvar oControl = item.getControl(),\r\n\t\t\t\t\t\tvName = item.getName();\r\n\t\t\t\t\tif (vName === \"Auditbusinessdaydate\") {\r\n\t\t\t\t\t\toControl.setEnabled(false);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tthis.byId(\"listReportFilter-btnGo\").firePress();\r\n\t\t}.bind(this), 1000);\r\n\r\n\t},\r\n\t_getFiltersStorage: function(pClearFilter) {\r\n\t\tvar sFiltrosGuardados = sessionStorage.getItem(\"misFiltrosGTrx\"),\r\n\t\t\tsFiltersDateTime = sessionStorage.getItem(\"misFiltrosGTrxTime\"),\r\n\t\t\tvDateDif = sFiltersDateTime ? (new Date() - new Date(sFiltersDateTime)) / 1000 / 60 : null;\r\n\t\tif (vDateDif > 30 || !vDateDif || pClearFilter) {\r\n\t\t\tsFiltrosGuardados = null;\r\n\t\t\tsessionStorage.removeItem(\"misFiltrosGTrx\");\r\n\t\t\tsessionStorage.removeItem(\"misFiltrosGTrxTime\");\r\n\t\t} else {\r\n\t\t\tsFiltrosGuardados = JSON.parse(sFiltrosGuardados);\r\n\t\t\tif (sFiltrosGuardados.Businessdaydate) {\r\n\t\t\t\tsFiltrosGuardados.Businessdaydate = new Date(sFiltrosGuardados.Businessdaydate);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn sFiltrosGuardados;\r\n\r\n\t}\r\n\r\n});",
		"zcargestauditv2/Component.js": "jQuery.sap.declare(\"zcargestauditv2.Component\");\r\nsap.ui.getCore().loadLibrary(\"sap.ui.generic.app\");\r\njQuery.sap.require(\"sap.ui.generic.app.AppComponent\");\r\n\r\nsap.ui.generic.app.AppComponent.extend(\"zcargestauditv2.Component\", {\r\n\tmetadata: {\r\n\t\t\"manifest\": \"json\"\r\n\t}\r\n});",
		"zcargestauditv2/localService/mockserver.js": "sap.ui.define([\r\n\t\"sap/ui/core/util/MockServer\"\r\n], function(MockServer) {\r\n\t\"use strict\";\r\n\tvar oMockServer,\r\n\t\t_sAppModulePath = \"zcargestauditv2/\",\r\n\t\t_sJsonFilesModulePath = _sAppModulePath + \"localService/mockdata\";\r\n\r\n\treturn {\r\n\r\n\t\t/**\r\n\t\t * Initializes the mock server.\r\n\t\t * You can configure the delay with the URL parameter \"serverDelay\".\r\n\t\t * The local mock data in this folder is returned instead of the real data for testing.\r\n\t\t * @public\r\n\t\t */\r\n\r\n\t\tinit: function() {\r\n\t\t\tvar oUriParameters = jQuery.sap.getUriParameters(),\r\n\t\t\t\tsJsonFilesUrl = jQuery.sap.getModulePath(_sJsonFilesModulePath),\r\n\t\t\t\tsManifestUrl = jQuery.sap.getModulePath(_sAppModulePath + \"manifest\", \".json\"),\r\n\t\t\t\tsEntity = \"Head\",\r\n\t\t\t\tsErrorParam = oUriParameters.get(\"errorType\"),\r\n\t\t\t\tiErrorCode = sErrorParam === \"badRequest\" ? 400 : 500,\r\n\t\t\t\toManifest = jQuery.sap.syncGetJSON(sManifestUrl).data,\r\n\t\t\t\toDataSource = oManifest[\"sap.app\"].dataSources,\r\n\t\t\t\toMainDataSource = oDataSource.mainService,\r\n\t\t\t\tsMetadataUrl = jQuery.sap.getModulePath(_sAppModulePath + oMainDataSource.settings.localUri.replace(\".xml\", \"\"), \".xml\"),\r\n\t\t\t\t// ensure there is a trailing slash\r\n\t\t\t\tsMockServerUrl = /.*\\/$/.test(oMainDataSource.uri) ? oMainDataSource.uri : oMainDataSource.uri + \"/\",\r\n\t\t\t\taAnnotations = oMainDataSource.settings.annotations;\r\n\r\n\t\t\toMockServer = new MockServer({\r\n\t\t\t\trootUri: sMockServerUrl\r\n\t\t\t});\r\n\r\n\t\t\t// configure mock server with a delay of 1s\r\n\t\t\tMockServer.config({\r\n\t\t\t\tautoRespond: true,\r\n\t\t\t\tautoRespondAfter: (oUriParameters.get(\"serverDelay\") || 1000)\r\n\t\t\t});\r\n\r\n\t\t\t// load local mock data\r\n\t\t\toMockServer.simulate(sMetadataUrl, {\r\n\t\t\t\tsMockdataBaseUrl: sJsonFilesUrl,\r\n\t\t\t\tbGenerateMissingMockData: true\r\n\t\t\t});\r\n\r\n\t\t\tvar aRequests = oMockServer.getRequests(),\r\n\t\t\t\tfnResponse = function(iErrCode, sMessage, aRequest) {\r\n\t\t\t\t\taRequest.response = function(oXhr) {\r\n\t\t\t\t\t\toXhr.respond(iErrCode, {\r\n\t\t\t\t\t\t\t\"Content-Type\": \"text/plain;charset=utf-8\"\r\n\t\t\t\t\t\t}, sMessage);\r\n\t\t\t\t\t};\r\n\t\t\t\t};\r\n\r\n\t\t\t// handling the metadata error test\r\n\t\t\tif (oUriParameters.get(\"metadataError\")) {\r\n\t\t\t\taRequests.forEach(function(aEntry) {\r\n\t\t\t\t\tif (aEntry.path.toString().indexOf(\"$metadata\") > -1) {\r\n\t\t\t\t\t\tfnResponse(500, \"metadata Error\", aEntry);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t// Handling request errors\r\n\t\t\tif (sErrorParam) {\r\n\t\t\t\taRequests.forEach(function(aEntry) {\r\n\t\t\t\t\tif (aEntry.path.toString().indexOf(sEntity) > -1) {\r\n\t\t\t\t\t\tfnResponse(iErrorCode, sErrorParam, aEntry);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\toMockServer.start();\r\n\r\n\t\t\tjQuery.sap.log.info(\"Running the app with mock data\");\r\n\r\n\t\t\tif (aAnnotations) {\r\n\t\t\t\taAnnotations.forEach(function(sAnnotationName) {\r\n\t\t\t\t\tvar oAnnotation = oDataSource[sAnnotationName],\r\n\t\t\t\t\t\tsUri = oAnnotation.uri,\r\n\t\t\t\t\t\tsLocalUri = jQuery.sap.getModulePath(_sAppModulePath + oAnnotation.settings.localUri.replace(\".xml\", \"\"), \".xml\");\r\n\r\n\t\t\t\t\t///annotiaons\r\n\t\t\t\t\tnew MockServer({\r\n\t\t\t\t\t\trootUri: sUri,\r\n\t\t\t\t\t\trequests: [{\r\n\t\t\t\t\t\t\tmethod: \"GET\",\r\n\t\t\t\t\t\t\tpath: new RegExp(\"\"),\r\n\t\t\t\t\t\t\tresponse: function(oXhr) {\r\n\t\t\t\t\t\t\t\tjQuery.sap.require(\"jquery.sap.xml\");\r\n\r\n\t\t\t\t\t\t\t\tvar oAnnotations = jQuery.sap.sjax({\r\n\t\t\t\t\t\t\t\t\turl: sLocalUri,\r\n\t\t\t\t\t\t\t\t\tdataType: \"xml\"\r\n\t\t\t\t\t\t\t\t}).data;\r\n\r\n\t\t\t\t\t\t\t\toXhr.respondXML(200, {}, jQuery.sap.serializeXML(oAnnotations));\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}]\r\n\r\n\t\t\t\t\t}).start();\r\n\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * @public returns the mockserver of the app, should be used in integration tests\r\n\t\t * @returns {sap.ui.core.util.MockServer}\r\n\t\t */\r\n\t\tgetMockServer: function() {\r\n\t\t\treturn oMockServer;\r\n\t\t}\r\n\t};\r\n\r\n});"
	}
});